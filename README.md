# Financer Actions

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á –ø—Ä–æ–µ–∫—Ç–∞ Financer.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [Sanity Daily Backup](#sanity-daily-backup)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö)

---

## üîÑ Sanity Daily Backup

GitHub Action –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ Sanity CMS –≤ AWS S3.

### –ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:

- ‚úÖ **–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** (—Ç–µ–∫—Å—Ç—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
- ‚úÖ **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã** (–æ—Ä–∏–≥–∏–Ω–∞–ª—ã –≤—Å–µ—Ö assets)
- ‚úÖ **–ü–æ–ª–Ω—ã–π –∞—Ä—Ö–∏–≤** –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.tar.gz` —Å –º–µ—Ç–∫–æ–π –¥–∞—Ç—ã

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ **3:00 UTC**
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ GitHub Actions UI

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Secrets –≤ GitHub:

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Secrets and variables ‚Üí Actions** –∏ –¥–æ–±–∞–≤—å—Ç–µ:

#### Sanity Secrets:
- `SANITY_PROJECT_ID` - ID –≤–∞—à–µ–≥–æ Sanity –ø—Ä–æ–µ–∫—Ç–∞
- `SANITY_TOKEN` - –¢–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ (—Å–æ–∑–¥–∞—Ç—å –≤ [sanity.io/manage](https://sanity.io/manage))

#### AWS S3 Secrets:
- `S3_BUCKET` - –ù–∞–∑–≤–∞–Ω–∏–µ S3 bucket –¥–ª—è –±—ç–∫–∞–ø–æ–≤
- `AWS_ACCESS_KEY_ID` - AWS Access Key ID
- `AWS_SECRET_ACCESS_KEY` - AWS Secret Access Key
- `AWS_REGION` - –†–µ–≥–∏–æ–Ω AWS (–Ω–∞–ø—Ä–∏–º–µ—Ä, `eu-central-1`)

### 2. –°–æ–∑–¥–∞–π—Ç–µ S3 Bucket:

```bash
aws s3 mb s3://your-backup-bucket-name
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ IAM –ø–æ–ª–∏—Ç–∏–∫—É –¥–ª—è S3:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:PutObject",
        "s3:PutObjectAcl"
      ],
      "Resource": "arn:aws:s3:::your-backup-bucket-name/*"
    }
  ]
}
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:
Action –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 UTC.

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Actions** –≤ GitHub
2. –í—ã–±–µ—Ä–∏—Ç–µ **Sanity Daily Backup**
3. –ù–∞–∂–º–∏—Ç–µ **Run workflow**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ S3:

```
s3://your-bucket/backups/
‚îú‚îÄ‚îÄ sanity-backup-2025-10-28_03-00-00.tar.gz
‚îú‚îÄ‚îÄ sanity-backup-2025-10-29_03-00-00.tar.gz
‚îî‚îÄ‚îÄ sanity-backup-2025-10-30_03-00-00.tar.gz
```

---

## üîô –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### 1. –°–∫–∞—á–∞–π—Ç–µ –±—ç–∫–∞–ø –∏–∑ S3:

```bash
aws s3 cp s3://your-bucket/backups/sanity-backup-2025-10-28_03-00-00.tar.gz .
```

### 2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤:

```bash
tar -xzf sanity-backup-2025-10-28_03-00-00.tar.gz
cd backup
```

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Sanity:

#### –ò–º–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```bash
sanity dataset import sanity-backup.ndjson production --replace
```

#### –ò–º–ø–æ—Ä—Ç assets (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è):
```bash
tar -xzf sanity-assets.tar.gz
# Assets –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

> **‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –§–ª–∞–≥ `--replace` —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑ —Ñ–ª–∞–≥–∞.

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–∞

–ö–∞–∂–¥—ã–π –±—ç–∫–∞–ø —Å–æ–¥–µ—Ä–∂–∏—Ç:

```
sanity-backup-full.tar.gz
‚îî‚îÄ‚îÄ backup/
    ‚îú‚îÄ‚îÄ sanity-backup.ndjson      # –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ NDJSON —Ñ–æ—Ä–º–∞—Ç–µ
    ‚îî‚îÄ‚îÄ sanity-assets.tar.gz      # –í—Å–µ —Ñ–∞–π–ª—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ GitHub Secrets
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ AWS IAM —Ä–æ–ª–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ S3 bucket
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Sanity Export API](https://www.sanity.io/docs/export)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [AWS S3 Documentation](https://docs.aws.amazon.com/s3/)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
